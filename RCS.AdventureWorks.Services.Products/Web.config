<?xml version="1.0" encoding="utf-8"?>

<configuration>
  
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  
  <system.web>
    <compilation debug="true" targetFramework="4.8" />
    <httpRuntime targetFramework="4.6.2" />
  </system.web>
  
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
        -->
    <directoryBrowse enabled="true" />
  </system.webServer>
  
  <!--
  Note this section is encrypted by using: aspnet_regiis -pef connectionStrings . -prov DataProtectionConfigurationProvider
  No explicit decryption is needed when on this service is hosted on the same server.
  -->
  <connectionStrings configProtectionProvider="DataProtectionConfigurationProvider">
    <EncryptedData>
      <CipherData>
        <CipherValue>AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAAPTknFkW7mUCjFx8S/BAG3gQAAAACAAAAAAAQZgAAAAEAACAAAAA4voWQ2WI0zGrpkjS7CTkaIB9rx4a5HXGc+dEGhAjMfAAAAAAOgAAAAAIAACAAAABWWYBKuyv3dSMLJt/M7pq03pYQQd0grW/LTECHO9LKVzACAADt8VzM+Yla/Rseesf0szcW9gudd39nQ1XijVDEWlWZshD9iESJA51LG6xi2giQbyeZ/5CSkZzCOhrAtIWAjJ374bu+GFqrV4IVT5tL417SLYflJ3O4UCQNcjNDW+0wJg8385Ghw2jOjm9qEXfiIkmD+AesXa7LvyrLGdn0xKz2nk73h4zO5Gh40TTVNZT7kEhe6OzvhKx7eonKffCFCPVXztSyeG5BcSMPn66J2By+6OZNEJoATfcVRSB00B1TF6Dj5BsFa9w/DdpKocm5ipVrKgrF5g0iTXlEphavtUdimIJDgJoWSDNHjzcirwZx9XeYwc6tCmcVFpNB9ehilEdtSQLQkUXGWL8nE3lQEkVJ2ftQpScnTrQuhRjhTbBr22vVKfT0cWNGGyVGCudAEoqM/wMNVqA1eWtcHpihqDgD+f1cz2Iu/CN1juY7BG2iKT5Ht81Dp8uUl2V2SRyWYjSOBZSP09VlyoXs4u+7bWSdXwyr06cz6rn6br+qVoohkXBB1mcSItDze6vWovwAZZq1AL8tJgjKzkA9qPqXxx/otQnWnSc4vfBWa8F8aiuqqr9YA+gz7E8qy0xICXZ9CqzWklrmViJGOz2dAlP7Aa5eopm2JCFthjoa5qwEVJZ0Ij9UsP1kymhbt2lZmNjMGkJJg6pQwSgSzHOeTaDpKIDijURDwBoRk4Qbwmo19ws4C4bBCkjWtBaHpzdqJylUHaG8ab1ZDfWoxHtGb1fX8BllfUAAAADe79cUQMax0OifAD8tNZGK/XFIoRhsn6M+3OoJ7NxJfUfy15wRgfBax2A6wXaDkcsi8JT21o0TdMoehtWFYx7H</CipherValue>
      </CipherData>
    </EncryptedData>
  </connectionStrings>
  
  <!-- Note the dlls NEED to be directly in the bin directory, it does not work to build to separate Release and Debug directories. -->
  <system.serviceModel>
    <bindings>
      <!--
            Note that currently a self signed certifcate on the server is enough to let the https binding function and be accepted by the Android device.
            Installing the self signed certicate on the Android device failed anyway and might need additional steps like creating a CA with OpenSSL.
            -->
      <wsHttpBinding>
        <binding name="TransportSecurity">
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </wsHttpBinding>
      <basicHttpBinding>
        <binding name="secureHttpBinding">
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="ProductsServiceBehavior" name="RCS.AdventureWorks.Services.Products.ProductsService">
        <endpoint address="ProductsServiceW" binding="wsHttpBinding" bindingConfiguration="TransportSecurity" contract="RCS.AdventureWorks.Services.Products.IProductsService" />
        <endpoint address="ProductsServiceB" binding="basicHttpBinding" bindingConfiguration="secureHttpBinding" contract="RCS.AdventureWorks.Services.Products.IProductsService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ProductsServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpsGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="mssqllocaldb" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework>

  <!--
	Note bindingRedirects need NOT explicitly be defined here, as they are generated into RCS.AdventureWorks.Services.Products.dll.config.
	https://docs.microsoft.com/en-gb/dotnet/framework/configure-apps/how-to-enable-and-disable-automatic-binding-redirection
	
	An extra target is added to the projectfile to make that working.
	
	Note that for IIS, web.config needs to be replaced by, or better linked to, the generated RCS.AdventureWorks.Services.Products.dll.config.
	-->
</configuration>